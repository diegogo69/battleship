(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var a={},s=[],i=0;i<n.length;i++){var l=n[i],d=o.base?l[0]+o.base:l[0],c=a[d]||0,p="".concat(d," ").concat(c);a[d]=c+1;var u=t(p),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(h);else{var m=r(h,o);o.byIndex=i,e.splice(i,0,{identifier:p,updater:m,references:1})}s.push(p)}return s}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var a=o(n=n||[],r=r||{});return function(n){n=n||[];for(var s=0;s<a.length;s++){var i=t(a[s]);e[i].references--}for(var l=o(n,r),d=0;d<a.length;d++){var c=t(a[d]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}a=l}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},158:(n,e,t)=>{t.d(e,{A:()=>i});var o=t(601),r=t.n(o),a=t(314),s=t.n(a)()(r());s.push([n.id,"\n.gameboard {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    box-sizing: content-box;\n    border: 1px solid var(--grid-border);\n}\n\n.gameboard-row {\n    display: flex;\n}\n\n.gameboard-col {\n    position: relative;\n    width: 34px;\n    height: 34px;\n    border: 1px solid var(--grid-border);\n}\n\n.ship {\n    display: flex;\n    max-width: max-content;\n    background-color: var(--ship-bg);\n    cursor: grab;\n    /* Align to gameboard grid */\n    border-right: 2px solid var(--ship-border);\n    border-bottom: 2px solid var(--ship-border);\n}\n\n/* HORIZONTAL SHIPS BORDER */\n.ship.flex-row .ship-cell {\n    border-top: 2px solid var(--ship-border);\n    border-left: 2px solid var(--ship-border);\n}\n\n/* VERTICAL SHIPS BORDER */\n.ship.flex-col .ship-cell {\n    border-top: 2px solid var(--ship-border);\n    border-left: 2px solid var(--ship-border);\n}\n\n.ship-cell {\n    position: relative;\n    width: 34px;\n    height: 34px;\n}\n\n.flex-row {\n    flex-direction: row;\n}\n\n.flex-col {\n    flex-direction: column;\n}\n\n.isMiss {\n    z-index: 1;\n    outline: 1px solid var(--miss-border);\n    border: 1px solid var(--miss-border);\n    background-color: var(--ship-miss);\n}\n\n.hasShip {\n    z-index: 2;\n    outline: 1px solid var(--ship-border);\n    border: 1px solid var(--ship-border);\n    background-color: var(--ship-bg);\n}\n\n.isHit {\n    z-index: 3;\n    outline: 1px solid  var(--ship-hit-border);\n    border: 1px solid var(--ship-hit-border);\n    background-color: var(--ship-hit);\n}\n\n.positioned {\n    z-index: 1;\n    position: absolute;\n    top: -2px;\n    left: -2px;\n}\n\n.gameboard-col.hovered {\n    background-color: yellow;\n}\n\n.ship.dragging {\n    opacity: 1;\n}\n\n.cell.invalid-drop {\n    background-color: red;\n}\n\n.invalid-cell {\n    cursor: not-allowed;\n}\n\n.gameboard > .player-board-span {\n    position: absolute;\n    /* text-align: center; */\n    top: -2.2rem;\n    left: 1px;\n    display: flex;\n    gap: .8rem;\n    align-items: center;\n    width: 340px;\n    cursor: default;\n}\n\n.gameboard > .player-board-span > div {\n    width: 12px;\n    height: 12px;\n}\n\n.being-attacked {\n    box-shadow: 0px 0px 15px 2px var(--red-shadow);\n    cursor: crosshair;\n}",""]);const i=s},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,o,r,a){"string"==typeof n&&(n=[[null,n,void 0]]);var s={};if(o)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(s[l]=!0)}for(var d=0;d<n.length;d++){var c=[].concat(n[d]);o&&s[c[0]]||(void 0!==a&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=a),t&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=t):c[2]=t),r&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=r):c[4]="".concat(r)),e.push(c))}},e}},320:(n,e,t)=>{t.d(e,{A:()=>i});var o=t(601),r=t.n(o),a=t(314),s=t.n(a)()(r());s.push([n.id,"* {\n    margin: 0;\n    padding: 0;\n}\n\nsvg {\n    width: 24px;\n}\n\nbody {\n    --body-bg: #fafafa;\n    --green-bg: #34d399;\n    --green-border: #10b981;\n    --blue-bg: #0ea5e9;\n    --blue-border: #2563eb;\n    --red-bg: #f43f5e;\n    --red-border: #be123c;\n    --yellow-bg: hsl(53, 96%, 60%);\n    --yellow-border: #fde047;\n\n    --shadow: #f1f5f9;\n    --red-shadow: #fb7185;\n    --grid-border: #ddd6fe;\n    --ship-bg: hsl(201, 96%, 80%);\n    --ship-border: hsl(188, 88%, 46%);\n    --ship-hit: #fb7185;\n    --ship-miss: hsl(60, 96%, 85%);\n    --miss-border: hsl(60, 46%, 75%);\n    --ship-hit-border: hsl(345, 83%, 46%);\n    --dark-bg: #262626;\n\n    height: 100vh;\n    display: flex;\n    flex-direction: column;\n    background-color: var(--body-bg);\n    color: var(--dark-bg);\n    user-select: none;\n}\n\nbody > header {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 5;\n    padding: .6rem 2rem;\n    border: 2px solid var(--shadow)\n}\n\nh1 > span:first-child {\n    color: var(--red-bg)\n}\n\nh1 > span:last-child {\n    color: var(--blue-bg)\n}\n\nbody > main {\n    flex: 1;\n    display: flex;\n    padding: 0 1rem;\n}\n\nbody > footer {\n    height: 4rem;\n    display: grid;\n    place-content: center;\n    padding: 1.2rem 2rem 1rem;\n}\n\nbody > header > h1 {\n    font-size: 1.6rem;\n}\n.game-container {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n}\n\n.boards-header {\n    display: grid;\n    place-content: center;\n}\n\n.boards-header h2{\n    font-size: 1.3rem;\n}\n\n.boards-container {\n    flex: 1;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    align-items: center;\n    gap: 2.8rem;\n    padding: 2rem 0;\n}\n\n.boards-footer {\n    display: grid;\n    justify-content: center;\n    gap: 0.9rem;\n    text-align: center;\n}\n\n.footer-text {\n    height: 2rem;\n    display: flex;\n    justify-content: center;\n    gap: 2rem;\n    font-weight: 900;\n}\n\n.footer-text > div {\n    display: flex;\n    gap: .4rem;\n    align-items: center;\n}\n\n.boards-btns {\n    display: flex;\n    justify-content: center;\n    gap: 1rem;\n}\n\n.boards-container > div {\n    min-width: 340px;\n    min-height: 340px;\n    max-width: 344px;\n    max-height: 344px;\n}\n\n.player1-container,\n.player2-container {\n    box-shadow: 1px 1px 8px 3px var(--shadow);\n    display: flex;\n}\n\n.ships-btns button{\n    width: 5.2rem;\n    height: 2.1rem;\n}\n\n.ships-btns select {\n    width: min-content;\n    height: 2.1rem;\n    padding-left: .2rem;\n\n    background-color: #ddd6fe;\n    border: 3px solid #c4b5fd;\n    border-radius: .2rem;\n    font-weight: 900;\n    cursor: pointer;\n    outline: none;\n}\n\nselect option {\n    /* background-color: #f5f3ff; */\n    background-color: #ede9fe;\n}\n\n.place-ships-wrapper {\n    position: relative;\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    padding: .8rem;\n}\n\n.ships-container {\n    flex: 1;\n    height: 260px;\n    display: flex;\n    flex-flow: column wrap;\n    gap: 1rem;\n}\n\n.place-ships-wrapper .fleet-select {\n    position: absolute;\n    top: -2.4rem;\n    right: 0;\n\n    width: 5.4rem;\n    /* height: 2.1rem; */\n    padding-left: .2rem;\n\n    /* background-color: #ddd6fe; */\n    border: 3px solid #ddd6fe;\n    border-radius: .2rem;\n    /* font-weight: 900; */\n    cursor: pointer;\n    outline: none;\n}\n\n.place-ships-wrapper .ships-btns {\n    padding-top: .8rem;\n    display: flex;\n    gap: .8rem;\n    justify-content: center;\n}\n\n.passScreen {\n    z-index: 4;\n    position: absolute;\n    top: -1px;\n    left: -1px;\n    width: 100%;\n    height: 100%;\n    display: grid;\n    place-content: center;\n    box-sizing: content-box;\n    border: 1px solid var(--grid-border);\n    background-color: hsla(0, 0%, 100%, 0.9);\n    backdrop-filter: blur(1px);\n\n}\n\n.passScreen > h3 {\n    font-size: 1.6rem;\n    padding: .8rem 0;\n\n}\n\ndialog button,\n.passScreen > button,\n.boards-btns button,\n.place-ships-wrapper button {\n    color: white;\n    font-weight: 900;\n    border-radius: .2rem;\n    cursor: pointer;\n}\n\n.passScreen > button,\n.place-ships-wrapper button.done-btn {\n    background-color:var(--green-bg);\n    border: 3px solid var(--green-border);\n}\n\ndialog button,\n.boards-btns button,\n.place-ships-wrapper button.random-btn {\n    background-color:var(--blue-bg);\n    border: 3px solid var(--blue-border);\n}\n\n.boards-btns button.new-pvp-btn {\n    background-color: var(--red-bg);\n    border: 3px solid var(--red-border);\n}\n\n.boards-btns > button {\n    padding: .4rem 1rem;\n    border-radius: 1rem;\n}\n\n.passScreen > button {\n    padding: .3rem 1rem;\n    border-radius: .2rem;\n    font-size: 1.3rem;\n}\n\n.cell-type {\n    width: 20px;\n    height: 20px;\n}\n\nbody > header #help-opener  {\n    position: absolute;\n    /* color: var(--grid-border); */\n    color: var(--dark-bg);\n    top: 1rem;  \n    right: 2rem;\n}\n\ndialog {\n    margin: auto;\n    border: 5px solid var(--blue-bg);\n    background-color: white;\n\n    padding: 4rem 6rem;\n    border-radius: 1rem;\n    user-select: none;\n    ;\n}\n\ndialog:open {\n    display: grid;\n    justify-items: center;\n    place-content: center;\n    gap: 1.4rem;\n}\n\ndialog::backdrop {\n    background-color: hwb(0 100% 0% / 0.1);\n    backdrop-filter: blur(2px);\n}\ndialog button {\n    color:white;\n    font-size: 1.1rem;\n    padding: .4rem 2rem;\n    border-radius: 1rem;\n    ;\n}",""]);const i=s},433:(n,e,t)=>{t.d(e,{A:()=>i});var o=t(601),r=t.n(o),a=t(314),s=t.n(a)()(r());s.push([n.id,"/*! modern-normalize v3.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */\n\n/*\nDocument\n========\n*/\n\n/**\nUse a better box model (opinionated).\n*/\n\n*,\n::before,\n::after {\n\tbox-sizing: border-box;\n}\n\nhtml {\n\t/* Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3) */\n\tfont-family:\n\t\tsystem-ui,\n\t\t'Segoe UI',\n\t\tRoboto,\n\t\tHelvetica,\n\t\tArial,\n\t\tsans-serif,\n\t\t'Apple Color Emoji',\n\t\t'Segoe UI Emoji';\n\tline-height: 1.5; /* 1. Correct the line height in all browsers. */\n\t-webkit-text-size-adjust: 100%; /* 2. Prevent adjustments of font size after orientation changes in iOS. */\n\ttab-size: 4; /* 3. Use a more readable tab size (opinionated). */\n}\n\n/*\nSections\n========\n*/\n\nbody {\n\tmargin: 0; /* Remove the margin in all browsers. */\n}\n\n/*\nText-level semantics\n====================\n*/\n\n/**\nAdd the correct font weight in Chrome and Safari.\n*/\n\nb,\nstrong {\n\tfont-weight: bolder;\n}\n\n/**\n1. Improve consistency of default fonts in all browsers. (https://github.com/sindresorhus/modern-normalize/issues/3)\n2. Correct the odd 'em' font sizing in all browsers.\n*/\n\ncode,\nkbd,\nsamp,\npre {\n\tfont-family:\n\t\tui-monospace,\n\t\tSFMono-Regular,\n\t\tConsolas,\n\t\t'Liberation Mono',\n\t\tMenlo,\n\t\tmonospace; /* 1 */\n\tfont-size: 1em; /* 2 */\n}\n\n/**\nAdd the correct font size in all browsers.\n*/\n\nsmall {\n\tfont-size: 80%;\n}\n\n/**\nPrevent 'sub' and 'sup' elements from affecting the line height in all browsers.\n*/\n\nsub,\nsup {\n\tfont-size: 75%;\n\tline-height: 0;\n\tposition: relative;\n\tvertical-align: baseline;\n}\n\nsub {\n\tbottom: -0.25em;\n}\n\nsup {\n\ttop: -0.5em;\n}\n\n/*\nTabular data\n============\n*/\n\n/**\nCorrect table border color inheritance in Chrome and Safari. (https://issues.chromium.org/issues/40615503, https://bugs.webkit.org/show_bug.cgi?id=195016)\n*/\n\ntable {\n\tborder-color: currentcolor;\n}\n\n/*\nForms\n=====\n*/\n\n/**\n1. Change the font styles in all browsers.\n2. Remove the margin in Firefox and Safari.\n*/\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n\tfont-family: inherit; /* 1 */\n\tfont-size: 100%; /* 1 */\n\tline-height: 1.5; /* 1 */\n\tmargin: 0; /* 2 */\n}\n\n/**\nCorrect the inability to style clickable types in iOS and Safari.\n*/\n\nbutton,\n[type='button'],\n[type='reset'],\n[type='submit'] {\n\t-webkit-appearance: button;\n}\n\n/**\nRemove the padding so developers are not caught out when they zero out 'fieldset' elements in all browsers.\n*/\n\nlegend {\n\tpadding: 0;\n}\n\n/**\nAdd the correct vertical alignment in Chrome and Firefox.\n*/\n\nprogress {\n\tvertical-align: baseline;\n}\n\n/**\nCorrect the cursor style of increment and decrement buttons in Safari.\n*/\n\n::-webkit-inner-spin-button,\n::-webkit-outer-spin-button {\n\theight: auto;\n}\n\n/**\n1. Correct the odd appearance in Chrome and Safari.\n2. Correct the outline style in Safari.\n*/\n\n[type='search'] {\n\t-webkit-appearance: textfield; /* 1 */\n\toutline-offset: -2px; /* 2 */\n}\n\n/**\nRemove the inner padding in Chrome and Safari on macOS.\n*/\n\n::-webkit-search-decoration {\n\t-webkit-appearance: none;\n}\n\n/**\n1. Correct the inability to style clickable types in iOS and Safari.\n2. Change font properties to 'inherit' in Safari.\n*/\n\n::-webkit-file-upload-button {\n\t-webkit-appearance: button; /* 1 */\n\tfont: inherit; /* 2 */\n}\n\n/*\nInteractive\n===========\n*/\n\n/*\nAdd the correct display in Chrome and Safari.\n*/\n\nsummary {\n\tdisplay: list-item;\n}",""]);const i=s},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={id:o,exports:{}};return n[o](a,a.exports,t),a.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var o=t(72),r=t.n(o),a=t(825),s=t.n(a),i=t(659),l=t.n(i),d=t(56),c=t.n(d),p=t(540),u=t.n(p),h=t(113),m=t.n(h),f=t(433),g={};g.styleTagTransform=m(),g.setAttributes=c(),g.insert=l().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=u(),r()(f.A,g),f.A&&f.A.locals&&f.A.locals;var b=t(320),v={};v.styleTagTransform=m(),v.setAttributes=c(),v.insert=l().bind(null,"head"),v.domAPI=s(),v.insertStyleElement=u(),r()(b.A,v),b.A&&b.A.locals&&b.A.locals;var y=t(158),S={};S.styleTagTransform=m(),S.setAttributes=c(),S.insert=l().bind(null,"head"),S.domAPI=s(),S.insertStyleElement=u(),r()(y.A,S),y.A&&y.A.locals&&y.A.locals;const x=function(){const n=document.querySelector("#help-dial");document.querySelector("#help-opener").addEventListener("click",(()=>{n.showModal()}));const e={main:document.querySelector("main"),boardsHeader:null,gameContainer:null,boardsContainer:null,btnWrapper:null,newPvPBtn:null,newPvCBtn:null,goBackBtn:null,footer:null,footerText:null,player:{1:null,2:null}},t={gamemodes(n,t){e.newPvCBtn.addEventListener("click",(()=>{n(!1)})),e.newPvPBtn.addEventListener("click",(()=>{n(!0)}))},goBack(n){e.goBackBtn=e.footer.querySelector(".go-back-btn"),e.goBackBtn.addEventListener("click",n)}},o={node(n,e,t){n.removeEventListener(e,t)},1:function(n,e){this.node(player1Container.firstChild,n,e)},2:function(n,e){this.node(player2Container.firstChild,n,e)}},r={node(n){for(;n.firstChild;)n.removeChild(n.firstChild)},player:{1:function(){r.node(e.player[1])},2:function(){r.node(e.player[2])}}},a={mainPage(n){r.node(e.main),e.main.appendChild(n)},boardsHeader(n){r.node(e.boardsHeader),e.boardsHeader.appendChild(n)},footer(n){e.gameContainer.removeChild(e.footer),e.gameContainer.appendChild(n),e.footer=n},board:{1:function(n){r.player[1](),e.player[1].appendChild(n)},2:function(n){r.player[2](),e.player[2].appendChild(n)}},ships(n,t){r.player[t](),e.player[t].appendChild(n)},dialog(n){document.body.appendChild(n),n.showModal()}};return{clear:r,render:a,removeEventListener:o,initHandlers:t,referenceDom:function(){e.gameContainer=e.main.querySelector(".game-container"),e.boardsHeader=e.gameContainer.querySelector(".boards-header"),e.boardsContainer=e.gameContainer.querySelector(".boards-container"),e.player[1]=e.boardsContainer.querySelector(".player1-container"),e.player[2]=e.boardsContainer.querySelector(".player2-container"),e.footer=e.main.querySelector("footer"),e.footerText=e.footer.querySelector("p"),e.btnWrapper=e.footer.querySelector(".boards-btns"),e.newPvPBtn=e.btnWrapper.querySelector(".new-pvp-btn"),e.newPvCBtn=e.btnWrapper.querySelector(".new-pvc-btn")}}}();class w{constructor(n,e,t,o){if("number"!=typeof t)throw"Invalid length argument";if(t<=0)throw"Invalid length argument";if("boolean"!=typeof o)throw"Invalid orientation argument";this.row=n,this.col=e,this.length=t,this.isHorizontal=o,this.hits=0,this.sunk=!1}static SHIPS=[{name:"patrol boat",length:1},{name:"submarine",length:2},{name:"destroyer",length:3},{name:"battleship",length:4},{name:"carrier",length:5}];static fleets={1:{shipsNo:5,ships:[{units:1,...w.SHIPS[0]},{units:1,...w.SHIPS[1]},{units:1,...w.SHIPS[2]},{units:1,...w.SHIPS[3]},{units:1,...w.SHIPS[4]}]},2:{shipsNo:5,ships:[{units:1,...w.SHIPS[1]},{units:2,...w.SHIPS[2]},{units:1,...w.SHIPS[3]},{units:1,...w.SHIPS[4]}]},3:{shipsNo:8,ships:[{units:1,...w.SHIPS[0]},{units:3,...w.SHIPS[1]},{units:2,...w.SHIPS[2]},{units:1,...w.SHIPS[3]},{units:1,...w.SHIPS[4]}]},4:{shipsNo:9,ships:[{units:4,...w.SHIPS[1]},{units:2,...w.SHIPS[2]},{units:2,...w.SHIPS[3]},{units:1,...w.SHIPS[0]}]}};static createShips(n=1){const e=[];return w.fleets[n].ships.forEach((n=>{for(let t=0;t<n.units;t++){const t={name:n.name,length:n.length,horizontal:0===Math.floor(2*Math.random())};e.push(t)}})),e}hit(){this.hits+=1}isSunk(){return this.length===this.hits}}const C=w;class E{constructor(n=1){this.fleet=n,this.shipsNo=C.fleets[n].shipsNo,this.sunks=0,this.ships=[];const e=E.SIZE;this.shotsBoard=[...Array(e)].map((()=>[...Array(e)].map((()=>null)))),this.shipsBoard=[...Array(e)].map((()=>[...Array(e)].map((()=>null))))}static get SIZE(){return 10}setFleet(n){this.fleet=n,this.shipsNo=C.fleets[n].shipsNo}randomShips(n){const e=E.getValidCoordinates(),t=(n,t)=>{const o=`${n}${t}`,r=e.indexOf(o);-1!==r&&e.splice(r,1)};C.createShips(n).forEach((n=>{let o=!1;for(;!1===o;){const r=Math.floor(Math.random()*e.length),a=e[r],s=parseInt(a[0]),i=parseInt(a[1]);if(o=this.placeShip(`${s}${i}`,n.length,n.horizontal),!1===o&&(n.horizontal=!n.horizontal,o=this.placeShip(`${s}${i}`,n.length,n.horizontal)),!0===o){const e=n.length,o=n.horizontal,{rowStart:r,rowEnd:a,colStart:l,colEnd:d}=E.getSorroundings(s,i,o,e);E.iterateSorroundings(r,a,l,d,t)}}}))}static getValidRandomCoordinate(n,e){const t=E.SIZE;let o=null,r=null;e?(o=t-n,r=t-1):(o=t-1,r=t-n);const a=Math.floor(Math.random()*(o+1)),s=Math.floor(Math.random()*(r+1));return console.log("GIVEN COORDINATES: "+a+s),{row:a,col:s}}static getValidCoordinates=()=>{const n=[];for(let e=0;e<E.SIZE;e++)for(let t=0;t<E.SIZE;t++)n.push(`${e}${t}`);return n};static getSorroundings(n,e,t,o){let r=null,a=null,s=null,i=null;const l=n+1,d=e+1;if(s=0===e?e:e-1,r=0===n?n:n-1,t){const t=e+o;i=t<E.SIZE?t:E.SIZE-1,a=l<E.SIZE?l:n}else{const t=n+o;a=t<E.SIZE?t:E.SIZE-1,i=d<E.SIZE?d:e}return{rowStart:r,rowEnd:a,colStart:s,colEnd:i}}static iterateSorroundings(n,e,t,o,r){for(let a=n;a<=e;a++)for(let n=t;n<=o;n++)if(!1===r(a,n))return!1;return!0}static getRandomCoordinate(){const n=Math.floor(Math.random()*E.validCoordinates.length);return E.validCoordinates[n]}static validateCoordinates(n){if("string"!=typeof n)throw new Error("Invalid non string coordinates");if(!/^[0-9][0-9]$/.test(n))throw new Error("Invalid format/out of bound coordinates");return{row:parseInt(n[0],10),col:parseInt(n[1],10)}}static validateOverlapping(n,e,t,o){for(let r=0;r<o;r++){const o=!0===t?n+r:n,a=!0!==t?e+r:e;if(null!==this.shipsBoard[a][o])return console.log("Invalid overlapping ship placement"),!1}return!0}static validCoordinates=E.getValidCoordinates();static validateBounds(n,e,t,o){if(o){if(e+t>E.SIZE)return console.log("Invalid drop: Ship exceeds grid boundaries horizontally."),!1}else if(n+t>E.SIZE)return console.log("Invalid drop: Ship exceeds grid boundaries vertically."),!1;return!0}canBePlaced(n,e,t,o){if(!E.validateBounds(n,e,t,o))return!1;const{rowStart:r,rowEnd:a,colStart:s,colEnd:i}=E.getSorroundings(n,e,o,t);for(let n=r;n<=a;n++)for(let e=s;e<=i;e++)if(null!==this.shipsBoard[n][e])return!1;return!0}#n(n,e,t,o){return this.ships.push(new C(n,e,t,o))-1}areSunk(){return this.sunks===this.shipsNo}placeShip(n,e,t){if("boolean"!=typeof t)throw"Invalid orientation argument";if(this.shipsNo===this.ships.length)throw new Error("Cannot place more ships, limit has been reached");let{row:o,col:r}=E.validateCoordinates(n);if(!this.canBePlaced(o,r,e,t))return!1;const a=this.#n(o,r,e,t);for(let n=0;n<e;n++)this.shipsBoard[o][r]=a,t?r+=1:o+=1;return this.shipsNo!==this.ships.length||null}receiveAttack(n){const{row:e,col:t}=E.validateCoordinates(n);if(null!==this.shotsBoard[e][t])return console.log("coordinate already attacked"),null;if(null!==this.shipsBoard[e][t]){const n=this.shipsBoard[e][t],o=this.ships[n];return o.hit(),this.shotsBoard[e][t]=!0,o.isSunk()?(this.sunks+=1,{row:o.row,col:o.col,length:o.length,isHorizontal:o.isHorizontal}):(console.log("Ship hit"),!0)}return this.shotsBoard[e][t]=!1,!1}}const L=E,I=(L.SHIPS_NO,function(n,e=B.dragstart,t=B.dragend,o=B.rotateShip){const r=document.createElement("div");return r.classList.add("ships-container"),n.forEach(((n,a)=>{const s=document.createElement("div");s.id=a,s.classList.add("ship"),s.classList.add("flex-row"),s.setAttribute("draggable",!0),s.dataset.length=n.length,s.dataset.orientation="horizontal";const i=n.name[0].toUpperCase()+n.name.slice(1);s.setAttribute("title",i);for(let e=0;e<n.length;e++){const n=document.createElement("div");n.classList.add("ship-cell"),s.appendChild(n)}s.addEventListener("dragstart",e),s.addEventListener("dragend",t),s.addEventListener("dblclick",o),r.appendChild(s)})),r}),k=function(){let n=null,e=null,t=null,o=null,r=null,a=null,s=null;const i=function(n){if(!1!==s)return;const e=n.currentTarget.closest(".place-ships-wrapper");if(e.querySelector(".ships-container").firstChild)return;const t=a.getTurn();console.log("Done fn");const o=document.querySelector(`#gameboard-${t}`);console.log(o);const r=a.getFleet();a.players[t].gameboard.setFleet(r);const l=function(n){const e=[];for(const t of n.children)for(const n of t.children)if(n.firstChild&&n.firstChild.classList.contains("ship")){console.log(n);const t=n.firstChild;e.push({rowcol:n.dataset.rowcol,length:parseInt(t.dataset.length),orientation:"horizontal"===t.dataset.orientation})}return e}(o);console.log(l),l.forEach((n=>{a.players[t].gameboard.placeShip(n.rowcol,n.length,n.orientation),console.log(n)}));const c=a.isPvPGamemode();if(console.log(c),1==c){if(1===t){a.changeTurn();const n=a.getTurn();return B.displayHeader(n,c,null,!0),B.displayBoard(n),void B.displayShips(i,n,r,c)}a.changeTurn()}else{a.players[2].gameboard.setFleet(r),a.players[2].gameboard.randomShips(r),console.log(a.players[2].gameboard.shipsBoard);const n=e.querySelector(".lvl-select").value;a.getAiLevels().includes(n)&&a.setAiLevel(n)}p(),d(),s=!0,B.displayHeader(a.getTurn(),a.isPvPGamemode(),null,!1),B.displayBoards()},l=function(n){c(),B.displayWinner(n,a.isPvPGamemode()),B.displayHeader(a.getTurn(),a.isPvPGamemode(),n,!1)},d=function(){n=n=>{if(!n.target.dataset.rowcol)return;if(a.getTurn()==n.currentTarget.dataset.boardNo)return void console.log("Ignored, player click in its own board");const e=r(n);if(null!==e){if(!a.isPvPGamemode()){const n=a.checkWinner();return null!==n&&l(n),void B.displayBoards()}if(e){const n=a.checkWinner();return null!==n&&l(n),void B.displayBoards()}return a.isPvPGamemode()&&!1===e?(B.displayHeader(a.getTurn(),a.isPvPGamemode(),null,!1),void B.displayPassScreen()):void 0}}},c=function(){n=null},p=function(){t=null,e=null,o=null};return{boardNode:function(r,i=!1,l=null){let d;d=null!==l?l:a.players[r].gameboard;const c=document.createElement("div");c.id=`gameboard-${r}`,c.classList.add("gameboard"),c.dataset.boardNo=r;const p=null!==l,u=p?r:a.getTurn();!p&&a.checkWinner()||r===u||c.classList.add("being-attacked");const h=d.shipsBoard,m=d.shotsBoard;let f=1;if(h.forEach((function(n,s){const l=document.createElement("div");l.classList.add("gameboard-row"),h[s].forEach((function(n,c){const g=document.createElement("div");g.classList.add("gameboard-col");const b=`${s}${c}`;if(g.dataset.rowcol=b,p||!1!==i||r!==u||(null!==h[s][c]&&g.classList.add("hasShip"),t&&g.addEventListener("drop",(n=>{t(n,d)})),e&&g.addEventListener("dragover",e),o&&g.addEventListener("dragleave",o)),p||a.isPvPGamemode()||1!=r)!1===m[s][c]&&g.classList.add("isMiss"),!0===m[s][c]&&g.classList.add("isHit");else{const n=a.players[2].getLastShots().indexOf(b),e=300*f;!1===m[s][c]&&(-1!==n?(setTimeout((()=>{g.classList.add("isMiss")}),e),f+=1.5):g.classList.add("isMiss")),!0===m[s][c]&&(-1!==n?(setTimeout((()=>{g.classList.add("isHit")}),e),f+=1.5):g.classList.add("isHit"))}l.appendChild(g)})),c.appendChild(l)})),!p&&!0===i&&r!==u){const n=document.createElement("div"),e=document.createElement("h3"),t=document.createElement("button");n.classList.add("passScreen"),e.textContent=`Player ${u} attacks`,t.textContent="Ready",t.addEventListener("click",(n=>{n.stopPropagation(),B.displayBoards()})),n.appendChild(e),n.appendChild(t),c.appendChild(n)}if(!p&&!1===i&&n&&c.addEventListener("click",n),!p&&s){const n=document.createElement("div");n.classList.add("player-board-span");const e=document.createElement("span");n.appendChild(e);for(let e=0;e<d.shipsNo;e++){const t=document.createElement("div");e<d.sunks?t.classList.add("isHit"):t.classList.add("hasShip"),n.appendChild(t)}s&&a.isPvPGamemode()?e.textContent=`Player ${r} ships:`:s&&1==r?e.textContent="Your ships:":s&&(e.textContent="Computer's:"),c.appendChild(n)}return p||a.isPvPGamemode()||1!=r||a.players[2].emptyLastShots(),c},doneFn:i,changeFleet:function(n){const e=n.currentTarget.value;if(e==a.getFleet())return;document.querySelectorAll(".ship").forEach((n=>{B.occupyCells(n,!1),n.parentNode.removeChild(n)})),a.setFleet(e);const t=a.getTurn(),o=a.isPvPGamemode();B.displayShips(i,t,e,o)},initGameboard:function(n){s=!1,a=n,r=a.handleTurn},enableTurnHandler:d,disableTurnHandler:c,enableDragDrop:function(n,r,a){e=n,t=r,o=a},disableDragDrop:p}}(),P=k;class H{constructor(n){this.type="real",this.gameboard=new L(n)}}class A extends H{constructor(n){super(n),this.type="computer",this.availableCoordinates=L.getValidCoordinates(),this.lastHit={rowcol:null,isHit:!1,isSunk:!1},this.adjacents=[],this.lastShots=[]}getLastShots(){return this.lastShots}emptyLastShots(){this.lastShots=[]}addLastShots(n){this.lastShots.push(n)}setLastHit({isHit:n,rowcol:e}){this.lastHit.isHit=n,this.lastHit.rowcol=e}getAdjacents(){const n=this.lastHit.rowcol,e=parseInt(n[0]),t=parseInt(n[1]),o=[];let r=null,a=null,s=null,i=null;return e>0&&(r=e-1,o.push(`${r}${t}`)),e<L.SIZE-1&&(a=e+1,o.push(`${a}${t}`)),t>0&&(s=t-1,o.push(`${e}${s}`)),t<L.SIZE-1&&(i=t+1,o.push(`${e}${i}`)),{nextTop:r,nextBottom:a,nextLeft:s,nextRight:i,possibleAdjacents:o}}addAdjacents(){const{possibleAdjacents:n}=this.getAdjacents();n.forEach((n=>{const e=this.availableCoordinates.indexOf(n);-1!==e&&(this.adjacents.push(n),this.availableCoordinates.splice(e,1))}))}removeAdjacents(){if(null==this.adjacents[0])return;const{row:n,col:e,length:t,isHorizontal:o}=this.lastHit.isHit,{rowStart:r,rowEnd:a,colStart:s,colEnd:i}=L.getSorroundings(n,e,o,t);L.iterateSorroundings(r,a,s,i,((n,e)=>{const t=`${n}${e}`,o=this.availableCoordinates.indexOf(t);if(-1!==o&&this.availableCoordinates.splice(o,1),this.adjacents[0]){const n=this.adjacents.indexOf(t);-1!==n&&this.adjacents.splice(n,1)}}))}getAdjacent(){return this.adjacents.shift()}getRandomAdjacent(){const n=Math.floor(Math.random()*this.adjacents.length),e=this.adjacents[n];return this.adjacents.splice(n,1),e}getRandomRowcol(){const n=Math.floor(Math.random()*this.availableCoordinates.length),e=this.availableCoordinates[n];return this.availableCoordinates.splice(n,1),e}generateRandomMove(n){if(console.log("AI turn aiLevel: "+n),null==this.availableCoordinates[0])throw new Error("No more available moves");if(this.lastHit.isHit&&"easy"!==n&&this.addAdjacents(),this.adjacents[0]&&"easy"!==n){if("object"==typeof this.lastHit.isHit&&this.removeAdjacents(!0),"normal"===n&&this.adjacents[0])return this.getRandomAdjacent();if("hard"===n&&this.adjacents[0])return this.getAdjacent()}return this.getRandomRowcol()}}const T=function(){const n=function(n=!0){const e=document.createElement("footer");e.classList.add("boards-footer");const t=document.createElement("div");t.classList.add("footer-text");const o=document.createElement("div");if(o.classList.add("boards-btns"),!0===n){t.textContent="Select a game mode:";const n=document.createElement("button");n.classList.add("new-pvc-btn"),n.textContent="1 player";const e=document.createElement("button");e.classList.add("new-pvp-btn"),e.textContent="2 players",o.appendChild(n),o.appendChild(e)}else{const n=document.createElement("div"),e=document.createElement("div");e.classList.add("hasShip"),e.classList.add("cell-type");const r=document.createElement("span");r.textContent="Ship",n.appendChild(e),n.appendChild(r);const a=document.createElement("div"),s=document.createElement("div");s.classList.add("isHit"),s.classList.add("cell-type");const i=document.createElement("span");i.textContent="Hit",a.appendChild(s),a.appendChild(i);const l=document.createElement("div"),d=document.createElement("div");d.classList.add("isMiss"),d.classList.add("cell-type");const c=document.createElement("span");c.textContent="Miss",l.appendChild(d),l.appendChild(c),t.appendChild(n),t.appendChild(a),t.appendChild(l);const p=document.createElement("button");p.classList.add("go-back-btn"),p.textContent="Back to menu",o.appendChild(p)}return e.appendChild(t),e.appendChild(o),e};return{main:function(){const e=document.createElement("div");e.classList.add("game-container");const t=function(){const n=document.createElement("header");n.classList.add("boards-header");const e=document.createElement("h2");return e.textContent="Are you ready for the battle?",n.appendChild(e),n}(),o=function(){const n=document.createElement("div");n.classList.add("boards-container");const e=document.createElement("div");e.classList.add("player1-container");const t=document.createElement("div");return t.classList.add("player2-container"),n.appendChild(e),n.appendChild(t),n}(),r=n();return e.appendChild(t),e.appendChild(o),e.appendChild(r),e},footer:n}}(),z=function(){const n=function(n,e=!0){if(!n.parentNode.classList.contains("gameboard-col"))return;const t=n.parentNode,o=parseInt(t.dataset.rowcol[0]),r=parseInt(t.dataset.rowcol[1]),a=parseInt(n.dataset.length),s="horizontal"==n.dataset.orientation,i=n.closest(".gameboard");for(let t=0;t<a;t++){let a=null;if(0===t)a=i.children[o].children[r];else if(s){const n=r+t;if(n>=L.SIZE)return!1;a=i.children[o].children[n]}else{const n=o+t;if(n>=L.SIZE)return!1;a=i.children[n].children[r]}1==e?(a.classList.add("occupied"),a.classList.add(`by-ship-${n.id}`)):null!=a&&a.classList.contains("occupied")&&a.classList.contains(`by-ship-${n.id}`)&&(a.classList.remove("occupied"),a.classList.remove(`by-ship-${n.id}`))}},e=function(n,e,t,o,r,a){if(!L.validateBounds(n,e,t,o))return!1;const s=function(n,e,t,o,r,a){const{rowStart:s,rowEnd:i,colStart:l,colEnd:d}=L.getSorroundings(n,e,o,t);return L.iterateSorroundings(s,i,l,d,((n,e)=>{const t=r.children[n];if(null==t)return!1;const o=t.children[e];if(null==o)return!1;const s=o.classList.contains(`by-ship-${a}`);return o.classList.contains("occupied")&&!s?(console.log("Invalid ship overlapping"),!1):void 0}))}(n,e,t,o,r,a);return s},t=function(n){n.preventDefault(),n.dataTransfer.getData("ship-class")},o=function(t,o){if(t.preventDefault(),"true"!==t.dataTransfer.getData("ship-class"))return;if(!t.target.classList.contains("gameboard-col"))return;const r=t.currentTarget,a=t.dataTransfer.getData("ship-id"),s=r.dataset.rowcol,i=parseInt(t.dataTransfer.getData("length")),l="horizontal"===t.dataTransfer.getData("orientation"),d=r.closest(".gameboard"),c=(d.dataset.boardNo,function(n,t,o,r,a,s){const{row:i,col:l}=L.validateCoordinates(n);return!!e(i,l,t,o,a,s)&&r.canBePlaced(i,l,t,o)}(s,i,l,o,d,a));if(0==c)return console.log("Invalid drop: Ship placement rejected."),r.classList.add("invalid-drop"),void setTimeout((()=>{r.classList.remove("invalid-drop")}),500);console.log(`Valid drop ship of length ${i} at ${s}`),r.classList.remove("hovered");const p=document.getElementById(a);"true"===t.dataTransfer.getData("is-placed")&&n(p,!1),p.classList.add("positioned"),p.classList.remove("dragging"),r.appendChild(p),n(p,!0),null===c&&(P.disableDragDrop(),P.enableTurnHandler())},r=function(n){n.currentTarget.classList.remove("hovered")},a=function(){const t=document.querySelectorAll(".ship"),o=document.querySelector(".gameboard"),r=L.getValidCoordinates(),a=(n,e)=>{const t=`${n}${e}`,o=r.indexOf(t);-1!==o&&r.splice(o,1)},s=(n,e)=>{console.log("Set ship orientation functionnnnnn"),n?(t[e].classList.remove("flex-col"),t[e].classList.add("flex-row"),t[e].dataset.orientation="horizontal"):(t[e].classList.remove("flex-row"),t[e].classList.add("flex-col"),t[e].dataset.orientation="vertical")};t.forEach(((t,i)=>{t.parentNode.classList.contains("gameboard-col")&&n(t,!1);let l=0===Math.floor(2*Math.random());s(l,i);const d=parseInt(t.dataset.length);let c=!1;for(;!c;){const p=Math.floor(Math.random()*r.length),u=r[p],h=parseInt(u[0]),m=parseInt(u[1]);if(c=e(h,m,d,l,o,t.id),c||(l=!l,s(l,i),c=e(h,m,d,l,o,t.id)),1==c){console.log("Dom valid?");const e=document.getElementById(t.id),r=o.children[h].children[m];e.classList.add("positioned"),e.classList.remove("dragging"),r.appendChild(e),n(e,!0);const{rowStart:s,rowEnd:i,colStart:c,colEnd:p}=L.getSorroundings(h,m,l,d);L.iterateSorroundings(s,i,c,p,a)}}}))},s=function(n,e,t=null,o=!1){const r=1===e?2:1,s=document.createElement("div");s.classList.add("place-ships-wrapper");const i=document.createElement("div");if(i.classList.add("ships-btns"),t&&1===e){const n=document.createElement("select");n.classList.add("fleet-select"),Object.keys(C.fleets).forEach(((e,o)=>{const r=document.createElement("option");t==e&&r.setAttribute("selected",!0),r.value=e,r.textContent=`Fleet ${o+1}`,n.appendChild(r)})),n.addEventListener("change",P.changeFleet),s.appendChild(n)}if(!o){const n=document.createElement("select");n.classList.add("lvl-select"),["easy","normal","hard"].forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e[0].toUpperCase()+e.slice(1),n.appendChild(t)})),i.appendChild(n)}const l=document.createElement("button");l.textContent="Done",l.classList.add("done-btn"),l.addEventListener("click",n),i.appendChild(l);const d=document.createElement("button");d.textContent="Random",d.classList.add("random-btn"),d.addEventListener("click",a),i.appendChild(d);const c=C.createShips(t),p=I(c);s.appendChild(p),s.appendChild(i),x.render.ships(s,r)},i=function(n,e=!1,t=null){let o=null;if(null!==t){const t=new L;o=P.boardNode(n,e,t)}else o=P.boardNode(n,e);x.render.board[n](o)},l=function(n=null,e=!1){i(1,e,n),i(2,e,n)},d=function(n,e,t=null,o=!1){let r=null;r=o&&!e?"Deploy your fleet":o?`Player ${n} place your navy`:2!=t||e?1!=t||e?t?`Player ${t} emerges victorious!`:1===n?`Player ${n} launch your attack`:`Player ${n} time to attack back`:"You won! :D":"Computer wins! :/";const a=document.createElement("h2");a.textContent=r,x.render.boardsHeader(a)},c=function(n){const e=function(){const n={1:null,2:null},e=["easy","normal","hard"];let t=1,o=null,r=null,a=e[0],s=1;const i=function(){return 1===t?2:1},l=function(){t=i()},d=function(){let e=n[2].generateRandomMove(a),t=n[1].gameboard.receiveAttack(e);n[2].setLastHit({isHit:t,rowcol:e}),n[2].addLastShots(e);let r=1;for(;t;){if(!0===n[1].gameboard.areSunk()){o=2,console.log("AI WINS. shot at: "+e);break}e=n[2].generateRandomMove(a),t=n[1].gameboard.receiveAttack(e),n[2].setLastHit({isHit:t,rowcol:e}),n[2].addLastShots(e),r++}return console.log("AI CONSECUTIVE TURNS: "+r),t};return{init:function(e){r=e,[n[1],n[2]]=function(){if(!0===r)return[new H(s),new H(s)];const n=new A(s);return[new H(s),n]}()},handleTurn:function(e){if(o)return;const a=e.target.dataset.rowcol;if(!a)return;if(e.target.closest(".gameboard").dataset.boardNo==t)return void console.log("Ignored. Player click on its own board");console.log("Turn on game Instance "+t);const s=i();let c=function(e){const t=i();return n[t].gameboard.receiveAttack(e)}(a);return null===c?null:(console.log("PLayer hit at: "+a),c?(!0===n[s].gameboard.areSunk()&&(o=t),!0):!0!==r?(c=d(),c):(l(),!1))},changeTurn:l,players:n,playAITurn:d,getTurn:function(){return t},checkWinner:function(){return o},isPvPGamemode:function(){return r},getRivalTurn:i,getAiLevels:function(){return e},getAiLevel:function(){return a},setAiLevel:function(n){a=n,console.log("ai level: "+a)},getFleet:function(){return s},setFleet:function(n){s=n}}}();e.init(n),P.initGameboard(e),P.enableDragDrop(t,o,r);const a=e.getTurn(),l=e.getFleet();d(a,n,null,!0),i(a),s(P.doneFn,a,l,n),p()},p=function(){const n=T.footer(!1);x.render.footer(n),x.initHandlers.goBack(h)},u=function(){x.initHandlers.gamemodes(c)},h=function(){const n=T.main();x.render.mainPage(n),x.referenceDom(),u(),l(!0)};return{initGame:c,displayBoard:i,displayBoards:l,displayPassScreen:function(){const n=!0;i(1,n),i(2,n)},displayShips:s,displayWinner:function(n,e){console.log("display winner fn");const t=document.createElement("dialog"),o=document.createElement("h2");o.textContent=e||2!==n?e||1!==n?`Player ${n} wins!`:"You won!":"Computer wins! :(";const r=document.createElement("button");r.textContent="Ok",r.autofocus=!0,r.addEventListener("click",(n=>{t.close(),t.parentNode.removeChild(t)})),t.appendChild(o),t.appendChild(r),x.render.dialog(t)},dragstart:function(n){const e=n.currentTarget,t=e.parentNode.classList.contains("gameboard-col");n.dataTransfer.setData("ship-id",e.id),n.dataTransfer.setData("ship-class",e.classList.contains("ship")),n.dataTransfer.setData("length",e.dataset.length),n.dataTransfer.setData("orientation",e.dataset.orientation),n.dataTransfer.setData("is-placed",t),n.dataTransfer.setDragImage(n.currentTarget,10,25),e.classList.add("dragging")},dragend:function(n){n.currentTarget.classList.remove("dragging")},drop:o,dragover:t,dragleave:r,rotateShip:function(t){const o=t.currentTarget;if(!o.parentNode.classList.contains("ships-container")){if(o.parentNode.classList.contains("gameboard-col")){const t=parseInt(o.parentNode.dataset.rowcol[0]),r=parseInt(o.parentNode.dataset.rowcol[1]),a=parseInt(o.dataset.length),s="horizontal"!==o.dataset.orientation,i=o.closest(".gameboard"),l=o.id;if(!e(t,r,a,s,i,l))return void console.log("Cannot rotate as it overlaps other ships");n(o,!1)}!0===o.classList.contains("flex-row")?(o.classList.remove("flex-row"),o.classList.add("flex-col"),o.dataset.orientation="vertical"):(o.classList.remove("flex-col"),o.classList.add("flex-row"),o.dataset.orientation="horizontal"),n(o,!0)}},occupyCells:n,testPlaceShips:function(n){n.gameboard.placeShip("00",1,!0),n.gameboard.placeShip("01",2,!0),n.gameboard.placeShip("10",2,!1)},initDomHandlers:u,displayHeader:d,mainPage:h}}(),B=z;B.mainPage()})();